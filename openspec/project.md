# Project Context

## 🌐 语言偏好和交流规范

**重要**：项目主要面向中文用户，所有 AI 助手必须使用中文与用户交流，除非用户明确要求使用英文。

### 交流语言标准
- **默认语言**：中文（普通话）
- **代码注释**：优先使用中文，技术术语保留英文
- **文档编写**：使用中文撰写，变量和函数名遵循编程约定
- **错误提示**：面向用户的错误信息使用中文
- **提交信息**：使用中文描述功能变更

## Purpose
为 Vainglory（虚荣）MOBA 游戏开发战术选角工具，帮助玩家在 5v5 对战中选择/禁用英雄时进行追踪和管理。这是一个纯粹的选角辅助工具，注重用户体验和数据管理效率，主要服务于中文玩家群体，同时兼顾英文用户。

核心功能包括：
- 英雄选择/禁用状态追踪和持久化
- 多维度搜索（中英文、拼音、模糊匹配）
- 智能分类管理（官方定位、常用位置、灵活位置）
- 灵活的视图控制和布局模式

## Tech Stack
- **前端框架**: React 19.2.0 + TypeScript
- **构建工具**: Vite 6.2.0
- **样式方案**: TailwindCSS（通过 CDN 加载）
- **搜索增强**: pinyin-pro 库支持拼音搜索
- **依赖管理**: Import maps + CDN (aistudiocdn.com) 非传统 npm 包管理
- **状态管理**: React useState + Set<string> 高效状态管理
- **数据持久化**: localStorage 多键值存储（选中英雄、分类模式、隐藏设置）

## Project Conventions

### Code Style
- **单体架构**: 主组件集中化（App.tsx 438行，约17KB包含绝大部分业务逻辑）
- **极简组件设计**: 只有真正需要复用时才创建独立组件（当前只有2个组件：App + HeroCard）
- **内联事件处理**: 大部分处理逻辑直接写在主组件中，避免过度抽象
- **扁平目录结构**: 避免过度嵌套，保持代码组织清晰
- **性能优先**: 大量使用 useMemo 和 useCallback 优化渲染性能
- **变量命名**: 使用 camelCase，组件名使用 PascalCase
- **常量管理**: 集中在 constants.ts 和独立模块中

### Architecture Patterns
- **状态管理**: 本地 React useState，英雄选择通过 Set<string> 高效管理
- **数据流模式**: 用户选择英雄 → 更新 Set → 触发重新计算 → 更新UI → 自动保存到localStorage
- **条件渲染**: 模态框和动态 UI 通过状态控制渲染（已选英雄展示、重置确认、分类信息）
- **响应式设计**: 动态网格系统，支持多种布局模式（auto/3/4/5列）
- **服务层分离**: 将数据处理逻辑分离到独立模块（data/heroes.ts）
- **类型安全**: 严格的 TypeScript 类型定义，确保数据结构一致性

### Performance Optimization Patterns
- **计算缓存**: 使用 useMemo 缓存过滤和分组结果，避免重复计算
- **事件函数优化**: useCallback 避免事件处理函数重复创建
- **搜索算法**: 实现支持拼音和模糊匹配的高级搜索算法
- **图片资源**: CDN 加载 + 按需加载策略，优化页面加载性能
- **内存管理**: Set 数据结构优化大量选中状态的内存占用

### Testing Strategy
- 当前项目没有配置测试框架（如 Jest、Vitest）
- 通过手动测试和开发服务器验证功能
- 热重载开发模式支持快速迭代和调试
- 使用浏览器开发工具进行性能分析
- 未来可考虑添加单元测试和集成测试

### Git Workflow
- 使用主分支开发模式
- 提交信息使用中文，描述具体功能变更
- 遵循语义化提交信息格式
- 定期构建和验证功能完整性
- 代码审查确保质量标准

## Domain Context

### 游戏背景
- **游戏**: Vainglory（虚荣）MOBA 游戏，5v5 对战模式
- **英雄系统**: 50+ 英雄，按官方定位（Captain/Jungle/Carry）分类
- **选角机制**: Ban/Pick 英雄的战术决策过程，涉及英雄选择和禁用策略
- **多语言支持**: 中英双语，拼音搜索，中文名优先显示以服务中文用户

### 数据模型
- **英雄结构**: id, name, cnName, nickname, role, commonRoles, flexRoles, attackType
- **分类体系**: 官方定位、常用位置、灵活位置三种分类模式
- **搜索维度**: 英文名、中文名、昵称、拼音全支持
- **状态管理**: 英雄选择状态、搜索过滤、UI状态等

### 工具功能
- **英雄追踪**: 标记已选择/禁用的英雄，支持批量操作和状态持久化
- **智能搜索**: 支持中英文、拼音、模糊匹配的多维度搜索算法
- **分类管理**: 官方定位、常用位置、灵活位置三种分类模式切换
- **视图控制**: 隐藏已选英雄、动态布局、滚动区域定位等视图管理功能

## Important Constraints

### Technical Constraints
- **依赖加载**: 通过 CDN 的 import maps 加载，非传统 npm 包管理方式
- **环境配置**: 必须在项目根目录创建 `.env.local` 文件并正确配置环境变量
- **构建要求**: 构建时注入环境变量，部署环境需正确配置 GEMINI_API_KEY
- **无代码检查**: 当前未配置 ESLint、Prettier 等代码检查工具
- **浏览器兼容性**: 需要支持现代浏览器的 ES6+ 特性

### Performance Constraints
- **内存管理**: Set 数据结构优化大量选中状态的内存占用
- **渲染性能**: 单页应用避免路由跳转，复杂的模态框交互需要优化
- **搜索性能**: 高效的模糊搜索算法，支持大量英雄数据的实时过滤
- **图片加载**: CDN 图片资源需要优化加载策略和缓存机制

### Business Constraints
- **用户群体**: 主要服务中文用户，兼顾英文用户体验
- **UI 风格**: 深色主题，蓝色强调色，移动端优先的响应式设计
- **数据准确**: 英雄数据和信息需保持与游戏版本同步
- **功能范围**: 专注于选角工具功能，不包含游戏分析或 AI 建议

## External Dependencies

### Resource Services
- **OSS 存储**: GitHub 仓库动态加载英雄图片资源 (https://www.luwei.space:4014/default/vainglory)
- **CDN 加载**: aistudiocdn.com 提供静态资源 CDN 服务
- **TailwindCSS CDN**: 原子化 CSS 框架通过 CDN 加载，无需本地构建

### Development Tools
- **pinyin-pro**: 拼音转换库，支持中文名搜索和拼音匹配
- **Vite**: 现代化构建工具，支持热重载和快速构建
- **React DevTools**: 浏览器扩展，用于 React 组件调试

### Important Notes
- 项目中虽然有 services/geminiService.ts 等 AI 相关文件，但明确表示不使用 AI 分析功能
- 这些文件可能是历史遗留或用于其他目的，当前版本为纯工具应用
- 所有功能都在客户端实现，无需后端服务支持